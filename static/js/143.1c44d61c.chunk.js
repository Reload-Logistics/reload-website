"use strict";(self.webpackChunkmatols_website=self.webpackChunkmatols_website||[]).push([[143],{1143:(e,t,s)=>{s.r(t),s.d(t,{default:()=>L});var l=s(2907),a=s(3216),o=s(6007),d=s(5624),i=s(7613),n=s(2820),r=s(5043),c=s(2780),x=s(4694),m=s(4732),u=s(4550),p=s(6178),h=s.n(p),b=s(5200),y=s(7793),v=s(1462),f=s(607),g=s(579);function j(e){let{booking:t,setOpenUpdateRoutesModal:s,setOpenUpdateDateTimeModal:l,setOpenUpdateVehicleTypeModal:a,setOpenUpdateAdditionalInformationModal:o,...d}=e;return(0,g.jsxs)("table",{...d,className:(0,x.cn)("table-auto border border-yellow-100 mt-4 w-full border-separate border-spacing-0 rounded-md shadow-sm",{"border-red-100":null===t||void 0===t?void 0:t.booking_canceled,"border-gray-100":null===t||void 0===t?void 0:t.booking_completed}),children:[(0,g.jsx)("thead",{className:(0,x.cn)("bg-yellow-200",{"bg-red-200":null===t||void 0===t?void 0:t.booking_canceled,"bg-gray-200":null===t||void 0===t?void 0:t.booking_completed}),children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{className:"rounded-ss-md text-start px-4 py-3",children:"Description"}),(0,g.jsx)("th",{className:"rounded-tr-md text-start px-4 py-3",children:"Details"})]})}),(0,g.jsxs)("tbody",{children:[(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,g.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2",children:[(0,g.jsx)("span",{children:"Date, time "}),(0,g.jsx)("div",{children:(0,g.jsx)("button",{onClick:()=>l(!0),disabled:(null===t||void 0===t?void 0:t.booking_canceled)||(null===t||void 0===t?void 0:t.booking_completed),className:(0,x.cn)("text-yellow-400 disabled:text-gray-300 hover:text-yellow-500 hover:disabled:text-gray-300"),children:(0,g.jsx)(b.Pj4,{size:18})})})]})}),(0,g.jsxs)("td",{className:"px-4 py-3 text-sm",children:[h()(new Date(null===t||void 0===t?void 0:t.booking_date)).format("YYYY-MMM-DD"),","," ",h()(new Date("".concat(null===t||void 0===t?void 0:t.booking_date," ").concat(null===t||void 0===t?void 0:t.booking_time))).format("HH:mm")]})]}),(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,g.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2",children:[(0,g.jsx)("span",{children:"Vehicle type "}),(0,g.jsx)("div",{children:(0,g.jsx)("button",{onClick:()=>a(!0),disabled:(null===t||void 0===t?void 0:t.booking_canceled)||(null===t||void 0===t?void 0:t.booking_completed),className:(0,x.cn)("text-yellow-400 disabled:text-gray-300 hover:text-yellow-500 hover:disabled:text-gray-300"),children:(0,g.jsx)(b.Pj4,{size:18})})})]})}),(0,g.jsxs)("td",{className:"px-4 py-3 text-sm",children:[null===t||void 0===t?void 0:t.vehicle_type," Ton"]})]}),(0,g.jsx)("tr",{children:(0,g.jsx)("td",{colSpan:2,className:"px-4 text-sm font-bold pt-3",children:(0,g.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2",children:[(0,g.jsx)("span",{children:"Additional information "}),(0,g.jsx)("div",{children:(0,g.jsx)("button",{onClick:()=>o(!0),disabled:(null===t||void 0===t?void 0:t.booking_canceled)||(null===t||void 0===t?void 0:t.booking_completed),className:(0,x.cn)("text-yellow-400 disabled:text-gray-300 hover:text-yellow-500 hover:disabled:text-gray-300"),children:(0,g.jsx)(b.Pj4,{size:18})})})]})})}),(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{className:"px-4 py-3 text-sm",children:"Helpers"}),(0,g.jsx)("td",{className:"px-4 py-3 text-sm",children:null===t||void 0===t?void 0:t.helpers})]}),(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{className:"px-4 py-3 text-sm",children:"Floors"}),(0,g.jsx)("td",{className:"px-4 py-3 text-sm",children:null===t||void 0===t?void 0:t.floors})]}),(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{className:"px-4 py-3 text-sm",children:"Payment option"}),(0,g.jsx)("td",{className:"px-4 py-3 text-sm",children:null===t||void 0===t?void 0:t.payment_option})]}),String(null===t||void 0===t?void 0:t.customer_driver_note).length>0&&(0,g.jsx)("tr",{children:(0,g.jsx)("td",{colSpan:2,className:"px-4 py-3 text-sm",children:(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{children:"Drivers note:"}),(0,g.jsx)("p",{className:"text-gray-400",children:null===t||void 0===t?void 0:t.customer_driver_note})]})})}),(0,g.jsx)("tr",{children:(0,g.jsx)("td",{colSpan:2,className:"px-4 py-3 text-sm",children:(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"py-2 w-full flex justify-start text-sm font-bold",children:(0,g.jsxs)("div",{className:"flex flex-row items-start justify-start gap-2",children:[(0,g.jsx)("div",{className:"flex flex-col gap-2",children:(0,g.jsx)("p",{children:"Pick up and drop off locations"})}),(0,g.jsx)("div",{children:(0,g.jsx)("button",{onClick:()=>s(!0),disabled:(null===t||void 0===t?void 0:t.booking_canceled)||(null===t||void 0===t?void 0:t.booking_completed),className:(0,x.cn)("text-yellow-400 disabled:text-gray-300 hover:text-yellow-500 hover:disabled:text-gray-300"),children:(0,g.jsx)(b.Pj4,{size:18})})})]})}),(0,g.jsx)("div",{className:"mt-1",children:null===t||void 0===t?void 0:t.pickup_dropoff_routes.map(((e,t)=>(0,g.jsx)(y.v,{pickup_dropoff_route:e},t)))}),(0,g.jsx)("div",{className:"w-full flex justify-start pt-2",children:(0,g.jsxs)("p",{className:"font-normal text-sm text-gray-400",children:["Total distance"," ",(0,g.jsxs)("span",{className:"text-slate-800",children:[null===t||void 0===t?void 0:t.distance," kms"]})]})})]})})}),(0,g.jsxs)("tr",{children:[(0,g.jsxs)("td",{className:(0,x.cn)("px-4 py-3 text-sm border-t border-t-yellow-100 flex flex-row justify-start items-center gap-1",{"border-t-red-100":null===t||void 0===t?void 0:t.booking_canceled,"border-t-gray-100":null===t||void 0===t?void 0:t.booking_completed}),children:["Base price"," ",(0,g.jsx)(u.m_,{content:f.Fk,placement:"top",trigger:"click",children:(0,g.jsx)(v.u7w,{className:"text-yellow-400 hover:text-yellow-500"})})]}),(0,g.jsxs)("td",{className:"px-4 py-3 text-sm border-t border-t-yellow-100 ",children:["R ",null===t||void 0===t?void 0:t.base_amount," "]})]}),(0,g.jsxs)("tr",{className:"border-b",children:[(0,g.jsxs)("td",{className:"px-4 py-3 text-sm flex flex-row justify-start items-center gap-1",children:["Mid month discount"," ",(0,g.jsx)(u.m_,{content:f.Sv,placement:"top",trigger:"click",children:(0,g.jsx)(v.u7w,{className:"text-yellow-400 hover:text-yellow-500"})})]}),(0,g.jsxs)("td",{className:"px-4 py-3 text-sm text-red-500",children:["R -",null===t||void 0===t?void 0:t.mid_month_discount," "]})]}),(0,g.jsxs)("tr",{children:[(0,g.jsxs)("td",{className:"px-4 py-3 text-sm flex flex-row justify-start items-center gap-1",children:["Loyal discount",(0,g.jsx)(u.m_,{className:"bg-slate-800",content:f.h1,placement:"top",trigger:"click",arrow:!0,children:(0,g.jsx)(v.u7w,{className:"text-yellow-400 hover:text-yellow-500"})})]}),(0,g.jsxs)("td",{className:"px-4 py-3 text-sm text-red-500 ",children:["R -",null===t||void 0===t?void 0:t.loyal_customer_discount," "]})]}),0!=(null===t||void 0===t?void 0:t.price_adjustment)&&(0,g.jsxs)("tr",{children:[(0,g.jsxs)("td",{className:"px-4 py-3 text-sm flex flex-col justify-start items-start gap-0",children:[(0,g.jsxs)("div",{className:"flex flex-row justify-start items-center gap-1",children:["Price adjustment",(0,g.jsx)(u.m_,{className:"bg-slate-800",content:f.E1,placement:"top",trigger:"click",arrow:!0,children:(0,g.jsx)(v.u7w,{className:"text-yellow-400 hover:text-yellow-500"})})]}),(0,g.jsx)(u.m_,{className:"bg-slate-800",content:"Justification: ".concat(null===t||void 0===t?void 0:t.price_adjustment_note),placement:"top",trigger:"click",arrow:!0,children:(0,g.jsx)("span",{className:"text-xs text-yellow-400 hover:text-yellow-600 cursor-pointer",children:"Read more"})})]}),(0,g.jsxs)("td",{className:(0,x.cn)("px-4 py-3 text-sm text-red-500 ",{"text-green-500":(null===t||void 0===t?void 0:t.price_adjustment)>0}),children:["R ",null===t||void 0===t?void 0:t.price_adjustment]})]}),(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{className:(0,x.cn)("px-4 py-3 text-lg  bg-yellow-200 font-extrabold flex flex-row justify-start items-center gap-2",{"bg-red-200":null===t||void 0===t?void 0:t.booking_canceled,"bg-gray-200":null===t||void 0===t?void 0:t.booking_completed}),children:"Balance due"}),(0,g.jsxs)("td",{className:(0,x.cn)("px-4 py-3 text-lg font-extrabold bg-yellow-200",{"bg-red-200":null===t||void 0===t?void 0:t.booking_canceled,"bg-gray-200":null===t||void 0===t?void 0:t.booking_completed}),children:["R ",null===t||void 0===t?void 0:t.amount_due_customer," "]})]})]})]})}function N(e){let{booking:t,setOpenUpdateVehicleTypeModal:s,setOpenUpdateRoutesModal:l,setOpenUpdateDateTimeModal:a,setOpenUpdateAdditionalInformationModal:o,...d}=e;return(0,g.jsxs)("div",{className:"rounded-md pb-6",children:[(0,g.jsx)("h2",{className:(0,x.cn)("text-start text-slate-800 font-extrabold text-lg",{"text-red-600":null===t||void 0===t?void 0:t.booking_canceled,"text-gray-800":null===t||void 0===t?void 0:t.booking_completed}),children:(null===t||void 0===t?void 0:t.id)>0&&(0,g.jsx)("div",{className:"pt-2",children:(0,g.jsxs)("span",{children:["Invoice ",null===t||void 0===t?void 0:t.id," ",(null===t||void 0===t?void 0:t.booking_canceled)&&(0,g.jsx)("span",{children:"cancelled"}),(null===t||void 0===t?void 0:t.booking_completed)&&(0,g.jsx)("span",{children:"completed"})]})})}),(0,g.jsx)(j,{booking:t,setOpenUpdateRoutesModal:l,setOpenUpdateDateTimeModal:a,setOpenUpdateVehicleTypeModal:s,setOpenUpdateAdditionalInformationModal:o}),d.children]})}var w=s(1581),_=s(7257);function k(e){let{booking:t,openUpdateVehicleTypeModal:s,setOpenUpdateVehicleTypeModal:a,...d}=e;const[m,p]=(0,r.useState)(!1),[h,b]=(0,r.useState)(!1),[y,v]=(0,r.useState)(Number(null===t||void 0===t?void 0:t.vehicle_type).toFixed(1)),j=(0,l.useQueryClient)(),{set:N}=(0,_.Z)((()=>{p((()=>!1)),b((()=>!1)),a((()=>!1))}),3e3),[k,M]=(0,r.useState)(!1),{isLoading:S,isSuccess:T,mutateAsync:D,isError:U,error:C}=(0,l.useMutation)("update-vehicle-type",{mutationFn:o.Du,onSuccess:e=>{b((e=>!0)),M((e=>!1)),j.invalidateQueries(["fetched-booking"]),N()},onMutate:e=>{M((e=>!0))},onError:e=>{p((e=>!0)),M((e=>!1))}});return(0,g.jsxs)(u.aF,{...d,size:"lg",id:"vehicle-type",position:"center",show:s,onClose:()=>a(!1),children:[(0,g.jsx)(u.aF.Header,{className:(0,x.cn)("bg-yellow-200 border-none",{"bg-gray-200":null===t||void 0===t?void 0:t.booking_completed,"bg-red-200":null===t||void 0===t?void 0:t.booking_canceled}),children:(0,g.jsx)("span",{className:"text-slate-800 font-bold text-2xl",children:"Vehicle type"})}),(0,g.jsxs)(u.aF.Body,{className:"bg-white rounded-md",color:"#fff",children:[(0,g.jsx)("div",{className:"mb-6",children:(0,g.jsx)("p",{className:"text-sm",children:"Trust Reload logistics services to transport your items safely."})}),f.rZ.map(((e,t)=>(0,g.jsx)(w._,{vehicle_details:e,onChange:v,value:y},t))),(0,g.jsxs)("div",{className:"mt-4 w-full flex flex-col justify-center items-end",children:[m&&(0,g.jsx)(i.$p,{className:"mb-4 w-full",secondaryText:"".concat(C.response.data.message," ").concat(C.message)}),h&&(0,g.jsx)(i.C9,{secondaryText:"Vehicle type successfully updated.",className:"mb-4 w-full"})]}),(0,g.jsx)("div",{className:"w-full flex justify-end",children:(0,g.jsx)(n.$,{disabled:k,className:"w-auto",onClick:async()=>{try{await D({vehicle_type:Number(y).toFixed(1),id:null===t||void 0===t?void 0:t.id})}catch(U){}},children:S?(0,g.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:(0,g.jsx)(c.LW,{visible:!0,width:"40",height:"20",color:"#000"})}):"Update"})})]})]})}var M=s(4858);function S(e){let{booking:t,openUpdateAdditionalInformationModal:s,setOpenUpdateAdditionalInformationModal:a,...d}=e;const[m,p]=(0,r.useState)(!1),[h,b]=(0,r.useState)(!1),[y,v]=(0,r.useState)(!1),j=(0,l.useQueryClient)(),{register:N,handleSubmit:w}=(0,M.mN)({defaultValues:{helpers:null===t||void 0===t?void 0:t.helpers,floors:null===t||void 0===t?void 0:t.floors,payment_option:null===t||void 0===t?void 0:t.payment_option,customer_driver_note:null===t||void 0===t?void 0:t.customer_driver_note}}),{set:k}=(0,_.Z)((()=>{p((()=>!1)),b((()=>!1)),a((()=>!1))}),3e3),{isLoading:S,mutateAsync:T,error:D}=(0,l.useMutation)("update-additional-information-modal",{mutationFn:o.Du,onSuccess:e=>{b((e=>!0)),v((e=>!1)),j.invalidateQueries(["fetched-booking"]),k()},onMutate:e=>{v((e=>!0))},onError:e=>{p((e=>!0)),v((e=>!1))}});return(0,g.jsxs)(u.aF,{...d,size:"lg",id:"update-additional-information",position:"center",show:s,onClose:()=>a(!1),children:[(0,g.jsx)(u.aF.Header,{className:(0,x.cn)("bg-yellow-200 border-none",{"bg-gray-200":null===t||void 0===t?void 0:t.booking_completed,"bg-red-200":null===t||void 0===t?void 0:t.booking_canceled}),children:(0,g.jsx)("span",{className:"text-slate-800 font-bold text-2xl",children:"add info"})}),(0,g.jsxs)(u.aF.Body,{className:"bg-white rounded-md",color:"#fff",children:[(0,g.jsx)("div",{className:"mb-6",children:(0,g.jsx)("p",{className:"text-sm",children:"Trust Reload logistics services to transport your items safely."})}),(0,g.jsxs)("form",{onSubmit:w((async e=>{try{await T({id:t.id,...e})}catch(s){}})),children:[(0,g.jsxs)("div",{className:"w-full",children:[(0,g.jsx)("select",{...N("helpers",{valueAsNumber:!0}),id:"helpers",name:"helpers",disabled:y,className:"block text-sm appearance-none w-full border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded-md leading-tight focus:outline-none focus:ring-yellow-400 focus:bg-white focus:border-yellow-400  disabled:bg-gray-200 disabled:pointer-events-none disabled:opacity-75",children:f.Ez.map(((e,t)=>(0,g.jsxs)("option",{value:t+1,children:[t+1," Helpers"]},t+1)))}),(0,g.jsx)("span",{className:"text-xs text-gray-400",children:"Request additional suport"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("select",{...N("floors",{valueAsNumber:!0}),id:"floors",name:"floors",disabled:y,className:"mt-4 block text-sm appearance-none w-full  border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded-md leading-tight focus:outline-none focus:ring-yellow-400 focus:bg-white focus:border-yellow-400  disabled:bg-gray-200 disabled:pointer-events-none disabled:opacity-75",children:f.Wg.map(((e,t)=>(0,g.jsxs)("option",{value:t+1,children:[t+1," Floors"]},t)))}),(0,g.jsx)("span",{className:"text-xs text-gray-400",children:"Total number of floors to carry up or down in both pick and dropoff locations"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("select",{...N("payment_option"),id:"payment_option",name:"payment_option",disabled:y,className:"mt-4 block text-sm appearance-none w-full border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded-md leading-tight focus:outline-none focus:ring-yellow-400 focus:bg-white focus:border-yellow-400  disabled:bg-gray-200 disabled:pointer-events-none disabled:opacity-75",children:["EFT","CASH"].map(((e,t)=>(0,g.jsxs)("option",{value:e,children:[e," payment"]},t)))}),(0,g.jsx)("span",{className:"text-xs text-gray-400",children:"Choose your prefared payment option"})]}),(0,g.jsxs)("div",{className:"mt-4",children:[(0,g.jsx)("textarea",{...N("customer_driver_note"),type:"text",rows:3,name:"customer_driver_note",placeholder:"Leave a note for the driver",disabled:y,className:(0,x.cn)("text-sm text-gray-700 w-full rounded-md border-gray-200 focus:bg-white focus:ring-yellow-400 focus:border-yellow-400 disabled:opacity-75 disabled:pointer-events-none  disabled:bg-gray-200")}),(0,g.jsx)("span",{className:"text-xs text-gray-400",children:"Need to give the driver additional instruction?, leave a note for the driver here."})]}),(0,g.jsxs)("div",{children:[m&&(0,g.jsx)(i.$p,{className:"mb-4",secondaryText:"".concat(D.response.data.message," ").concat(D.message)}),h&&(0,g.jsx)(i.C9,{secondaryText:"Additional information successfully updated.",className:"my-4 w-full"})]}),(0,g.jsx)("div",{className:"flex flex-row items-center justify-end gap-3",children:(0,g.jsx)(n.$,{disabled:y,className:"w-auto",children:S?(0,g.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:(0,g.jsx)(c.LW,{visible:!0,width:"40",height:"20",color:"#000"})}):"Update"})})]})]})]})}var T=s(6316),D=s(4451),U=s(524),C=s(8386),R=s(1569);function O(e){let{booking:t,openUpdateRoutesModal:s,setOpenUpdateRoutesModal:a,...d}=e;const m=(0,l.useQueryClient)(),[p,h]=(0,r.useState)(!1),b=(0,T.h)([...null===t||void 0===t?void 0:t.pickup_dropoff_routes]),y=(0,D.J)(b.push),[v,f]=(0,r.useState)(!1),[j,N]=(0,r.useState)(!1),{set:w}=(0,_.Z)((()=>{f((()=>!1)),N((()=>!1)),a((()=>!1))}),3e3),{isComputeDistanceLoading:k,isComputeDistanceError:M,computeDistanceError:S,computeDistanceAsync:O}=(0,U.Q)(h),{isLoading:F,mutateAsync:A,error:I}=(0,l.useMutation)("update-routes-modal",{mutationFn:o.Du,onSuccess:e=>{N((e=>!0)),h((e=>!1)),m.invalidateQueries(["fetched-booking"]),w()},onMutate:e=>{h((e=>!0))},onError:e=>{f((e=>!0)),h((e=>!1))}});return(0,g.jsxs)(u.aF,{...d,size:"lg",id:"update-routes",position:"center",show:s,onClose:()=>a(!1),children:[(0,g.jsx)(u.aF.Header,{className:(0,x.cn)("bg-yellow-200 border-none",{"bg-gray-200":null===t||void 0===t?void 0:t.booking_completed,"bg-red-200":null===t||void 0===t?void 0:t.booking_canceled}),children:(0,g.jsx)("div",{children:(0,g.jsx)("span",{className:"text-slate-800 font-bold text-2xl",children:"Routes"})})}),(0,g.jsxs)(u.aF.Body,{className:"bg-white rounded-md",color:"#fff",children:[(0,g.jsx)("div",{className:"mb-6",children:(0,g.jsx)("p",{className:"text-sm",children:"Trust Reload logistics services to transport your items safely."})}),(0,g.jsxs)("div",{children:[(0,g.jsx)(C.b,{useArrayOutput:b,disableUserInterface:p}),(0,g.jsx)(R.K,{useRoutesOutput:y,disableUserInterface:p,setDisableUserInterface:h})]}),(0,g.jsxs)("div",{className:"mt-4",children:[M&&(0,g.jsx)(i.$p,{className:"mb-4",secondaryText:"".concat(S.response.data.message," ").concat(S.message)}),v&&(0,g.jsx)(i.$p,{className:"mb-4",secondaryText:"".concat(I.response.data.message," ").concat(I.message)}),j&&(0,g.jsx)(i.C9,{secondaryText:"Routes successfully updated",className:"mb-4"})]}),(0,g.jsx)("div",{className:"pb-4 flex justify-end",children:(0,g.jsx)(n.$,{disabled:b.array.length<2,className:"w-auto",onClick:async()=>{if(!(b.array.length<1))try{await O({pickup_dropoff_routes:b.array}).then((async e=>{try{const s={id:t.id,distance:Number(e.distance),pickup_dropoff_routes:b.array};await A(s)}catch(s){}}))}catch(e){}},children:k||F?(0,g.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:(0,g.jsx)(c.LW,{visible:!0,width:"40",height:"20",color:"#000"})}):"Update"})})]})]})}var F=s(1899),A=s.n(F);s(3871);function I(e){let{booking:t,openUpdateDateTimeModal:s,setOpenUpdateDateTimeModal:a,...d}=e;const m=(0,l.useQueryClient)(),[p,b]=(0,r.useState)(!1),[y,v]=(0,r.useState)(!1),[f,j]=(0,r.useState)(!1),{set:N}=(0,_.Z)((()=>{v((()=>!1)),j((()=>!1)),a((()=>!1))}),3e3),{handleSubmit:w,control:k}=(0,M.mN)({defaultValues:{booking_date:"".concat(null===t||void 0===t?void 0:t.booking_date),booking_time:"".concat(null===t||void 0===t?void 0:t.booking_time)}}),{isLoading:S,isSuccess:T,mutateAsync:D,isError:U,error:C}=(0,l.useMutation)("update_additional_information_modal",{mutationFn:o.Du,onSuccess:e=>{j((e=>!0)),b((e=>!1)),m.invalidateQueries(["fetched-booking"]),N()},onMutate:e=>{b((e=>!0))},onError:e=>{v((e=>!0)),b((e=>!1))}});return(0,g.jsxs)(u.aF,{...d,size:"lg",id:"date-time",position:"center",show:s,onClose:()=>a(!1),children:[(0,g.jsx)(u.aF.Header,{className:(0,x.cn)("bg-yellow-200 border-none",{"bg-gray-200":null===t||void 0===t?void 0:t.booking_completed,"bg-red-200":null===t||void 0===t?void 0:t.booking_canceled}),children:(0,g.jsx)("span",{className:"text-slate-800 font-bold text-2xl",children:"Date time"})}),(0,g.jsxs)(u.aF.Body,{className:"bg-white rounded-md",color:"#fff",children:[(0,g.jsx)("div",{children:(0,g.jsx)("p",{className:"text-sm",children:"Trust Reload logistics services to transport your items safely."})}),(0,g.jsxs)("form",{onSubmit:w((async e=>{try{await D({id:t.id,...e})}catch(s){}})),children:[(0,g.jsxs)("div",{className:"my-4 flex flex-col",children:[(0,g.jsx)("span",{className:"text-sm font-bold text-gray-400 mb-2",children:"Booking date"}),(0,g.jsx)(M.xI,{control:k,name:"booking_date",render:e=>{let{field:t}=e;return(0,g.jsx)(A(),{className:(0,x.cn)("text-sm w-full rounded-md text-gray-700 border-gray-200 focus:ring-yellow-400 focus:bg-white focus:border-yellow-400 py-3 px-4 disabled:bg-gray-200 disabled:pointer-events-none disabled:opacity-75"),disabled:p,dateFormat:"yyyy-MMM-dd",timeFormat:"HH:mm",minDate:Date.now(),showPopperArrow:!1,closeOnScroll:!0,selected:t.value,onChange:e=>t.onChange(h()(e).format("yyyy-MM-DD")),onFocus:e=>e.target.readOnly=!0})}})]}),(0,g.jsxs)("div",{className:"custom_datepicker_width my-4 flex flex-col",children:[(0,g.jsx)("span",{className:"text-sm text-gray-400 font-bold mb-2",children:"Booking time"}),(0,g.jsx)(M.xI,{control:k,name:"booking_time",render:e=>{let{field:t}=e;return(0,g.jsx)(A(),{timeFormat:"HH:mm",dateFormat:"HH:mm",timeCaption:"Time",disabled:p,className:(0,x.cn)("text-sm rounded-md w-full  disabled:bg-gray-200 disabled:pointer-events-none disabled:opacity-75 text-gray-700 border-gray-200 focus:ring-yellow-400 focus:bg-white focus:border-yellow-400 py-3 px-4",{}),minDate:Date.now(),timeIntervals:15,showTimeSelect:!0,showTimeSelectOnly:!0,showPopperArrow:!1,selected:new Date(Date.parse("2024-06-05 ".concat(t.value))),onChange:e=>t.onChange(h()(e).format("HH:mm:ss")),onFocus:e=>e.target.readOnly=!0})}})]}),(0,g.jsxs)("div",{children:[y&&(0,g.jsx)(i.$p,{className:"mb-4",secondaryText:"".concat(C.response.data.message," ").concat(C.message)}),f&&(0,g.jsx)(i.C9,{secondaryText:"Booking date time updated successfully",className:"mb-4 w-full"})]}),(0,g.jsx)("div",{children:(0,g.jsx)("div",{className:"flex flex-row items-center justify-end gap-3",children:(0,g.jsx)(n.$,{disabled:p,className:"w-auto",children:S?(0,g.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:(0,g.jsx)(c.LW,{visible:!0,width:"40",height:"20",color:"#000"})}):"Update"})})})]})]})]})}function L(){const[e,t]=(0,r.useState)(!1),[s,u]=(0,r.useState)(!1),[p,h]=(0,r.useState)(!1),[b,y]=(0,r.useState)(!1),[v,f]=(0,r.useState)(!1),j=(0,l.useQueryClient)(),{id:w}=(0,a.g)(),{data:_,error:M,isError:T,isLoading:D}=(0,l.useQuery)({queryKey:["fetched-booking"],queryFn:()=>(0,o.SH)(w),onSuccess:e=>{}});(0,r.useEffect)((()=>{window.scrollTo(0,0)}),[]);const{isLoading:U,mutateAsync:C,isError:R,error:F}=(0,l.useMutation)("cancel-booking",{mutationFn:o.Du,onSuccess:e=>{window.scrollTo(0,0),f((e=>!1)),j.invalidateQueries(["fetched-booking"])},onMutate:e=>{f((e=>!0))},onError:e=>{f((e=>!1))}});return D?(0,g.jsx)(d.q,{secondary_text:"loading booking"}):T?(0,g.jsx)(i.$p,{secondaryText:"".concat(M.response.data)}):(0,g.jsx)(m.q,{children:(0,g.jsxs)("main",{className:"max-w-xl mx-auto p-6 my-6 text-black bg-white",children:[(0,g.jsx)("div",{className:"rounded-md p-4 shadow-sm border border-gray-200 my-2",children:(0,g.jsxs)("h2",{className:(0,x.cn)("text-start text-black font-extrabold text-3xl",{"text-red-500":null===_||void 0===_?void 0:_.booking_canceled,"text-gray-800":null===_||void 0===_?void 0:_.booking_completed}),children:["Invoice ",w,(0,g.jsx)("p",{className:"text-sm font-normal text-slate-800 pt-2",children:"Thank you for trusting Reload Logistic Services with your personal information."})]})}),(0,g.jsx)(N,{booking:_,setOpenUpdateVehicleTypeModal:t,setOpenUpdateRoutesModal:y,setOpenUpdateDateTimeModal:h,setOpenUpdateAdditionalInformationModal:u,children:(0,g.jsxs)("div",{children:[R&&(0,g.jsx)(i.$p,{className:"mb-4",secondaryText:"".concat(F.response.data.message," ").concat(F.message)}),(0,g.jsx)("div",{className:"flex flex-row justify-end gap-4 mt-4",children:(0,g.jsx)(n.$,{onClick:async()=>{try{await C({booking_canceled:!0,id:_.id})}catch(e){}},disabled:_.booking_canceled||_.booking_completed||v,className:"w-auto bg-red-500 text-white hover:bg-red-600 disabled:bg-red-200 disabled:text-gray-600",children:U?(0,g.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:(0,g.jsx)(c.LW,{visible:!0,width:"40",height:"20",color:"#000"})}):"Cancel"})})]})},_.id),(0,g.jsx)(k,{booking:_,openUpdateVehicleTypeModal:e,setOpenUpdateVehicleTypeModal:t}),(0,g.jsx)(O,{booking:_,openUpdateRoutesModal:b,setOpenUpdateRoutesModal:y}),(0,g.jsx)(I,{booking:_,openUpdateDateTimeModal:p,setOpenUpdateDateTimeModal:h}),(0,g.jsx)(S,{booking:_,openUpdateAdditionalInformationModal:s,setOpenUpdateAdditionalInformationModal:u}),(0,g.jsx)("div",{className:"mb-20"})]})})}},7613:(e,t,s)=>{s.d(t,{$p:()=>i,C9:()=>o,Z0:()=>d});s(5043);var l=s(4694),a=s(579);function o(e){let{secondaryText:t,className:s,children:o,...d}=e;return(0,a.jsx)("div",{...d,className:(0,l.cn)("bg-green-100 border-t-4 border-green-500 rounded-b-md text-green-900 px-4 py-2",s),role:"alert",children:(0,a.jsx)("div",{className:"flex text-wrap break-words",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold",children:"Yey ! all set"}),(0,a.jsx)("p",{className:"text-sm text-wrap break-words",children:t||"Welcome to Reload Logistics services"})]})})})}function d(e){let{primaryText:t,secondaryText:s,className:o,children:d,...i}=e;return(0,a.jsx)("div",{...i,className:(0,l.cn)("bg-blue-100 border-t-4 border-blue-500 rounded-b-md text-blue-700 px-4 py-2",o),role:"alert",children:(0,a.jsx)("div",{className:"flex text-wrap break-words",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold",children:t}),(0,a.jsx)("p",{className:"text-sm text-wrap break-words",children:s||"Welcome to Reload Logistics services"})]})})})}function i(e){let{secondaryText:t,className:s,children:o,...d}=e;return(0,a.jsx)("div",{...d,className:(0,l.cn)("bg-red-100 border-t-4 border-red-500 rounded-b-md text-red-900 px-4 py-2",s),role:"alert",children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold",children:"Oops ! Error"}),(0,a.jsx)("p",{className:"text-sm",children:t||"An error occured"})]})})})}},7793:(e,t,s)=>{s.d(t,{v:()=>o});var l=s(5394),a=s(579);function o(e){let{pickup_dropoff_route:t}=e;return(0,a.jsx)("div",{className:"mb-1 border border-gray-200 p-2 rounded-md",children:(0,a.jsxs)("div",{className:"flex flex-row items-start gap-1",children:[(0,a.jsx)("div",{children:(0,a.jsx)(l.eVO,{size:18,className:"text-gray-400"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsxs)("p",{className:"text-sm font-bold",children:[t.primary_text,","," ",(0,a.jsx)("span",{className:"font-normal",children:t.secondary_text})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-400",children:[String(t.route_detail).length>0&&(0,a.jsx)("span",{className:"font-bold",children:"Message:"})," ",t.route_detail]})]})]})})}},1581:(e,t,s)=>{s.d(t,{_:()=>o});var l=s(4694),a=s(579);function o(e){let{vehicle_details:t,onChange:s,value:o,...d}=e;const i=()=>s((e=>Number(t.vehicle_type).toFixed(1)));return(0,a.jsx)("div",{className:(0,l.cn)("rounded-md p-2 shadow-sm border border-gray-200 my-2 text-xs",{"text-sm bg-yellow-400 bg-opacity-40":o===Number(t.vehicle_type).toFixed(1)}),onClick:i,children:(0,a.jsxs)("div",{className:"flex justify-start items-start gap-3",children:[(0,a.jsx)("input",{...d,type:"checkbox",id:Number(t.vehicle_type).toFixed(1),value:Number(t.vehicle_type).toFixed(1),checked:o===Number(t.vehicle_type).toFixed(1),onChange:i,className:(0,l.cn)("peer rounded-sm border-gray-300 my-[0.1rem] checked:my-[0.3rem] text-yellow-400 focus:ring-yellow-400 disabled:opacity-75 disabled:pointer-events-none",{})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("label",{htmlFor:"termsandprivacy",className:"peer-checked:font-extrabold font-bold peer-checked:text-yellow-500",children:[t.vehicle_type," Ton"," ",(0,a.jsx)("span",{className:"font-normal text-slate-800",children:t.vehicle_description})]}),(0,a.jsxs)("div",{className:"flex flex-row justify-start items-center gap-4",children:[(0,a.jsx)("img",{className:"h-9",src:t.vehicle_type_svg,alt:"{vehicle_details.vehicle_type_svg}"}),(0,a.jsxs)("div",{className:"text-xs",children:[(0,a.jsxs)("p",{className:"font-extrabold text-slate-800",children:["Max weight:"," ",(0,a.jsx)("span",{className:"font-normal",children:t.vehicle_max_weight})]}),(0,a.jsxs)("p",{className:"font-extrabold text-slate-800",children:["Load deck:"," ",(0,a.jsx)("span",{className:"font-normal",children:t.vehicle_load_deck})]})]})]})]})]})})}},8386:(e,t,s)=>{s.d(t,{b:()=>m});var l=s(5043),a=s(4858),o=s(4694),d=s(184),i=s(579);const n=l.forwardRef(((e,t)=>{let{className:s,route:l,routeIndex:n,updateRoute:r,toggleRouteDetailVisibility:c,disableUserInterface:x,...m}=e;const{register:u,handleSubmit:p,reset:h}=(0,a.mN)();return(0,i.jsxs)("form",{...m,ref:t,className:(0,o.cn)("w-full hidden",s),onSubmit:p((e=>{r(n,{...l,...e}),c(),h()})),children:[(0,i.jsx)("div",{children:(0,i.jsx)("input",{...u("route_detail",{disabled:x}),type:"text",name:"route_detail",placeholder:"Please enter details",className:(0,o.cn)("text-sm text-slate-800 w-full relative shadow-sm block rounded-md border-0 border-b-gray-200 focus:z-10 ring-0 focus:ring-yellow-400 focus:border-yellow-400 disabled:opacity-75 disabled:pointer-events-none")})}),(0,i.jsx)("div",{className:"w-full flex flex-row justify-end items-center px-2 pt-2",children:(0,i.jsx)("button",{type:"submit",className:"text-green-700 hover:text-opacity-75 disabled:pointer-events-none disabled:opacity-75",children:(0,i.jsx)(d.CMH,{})})})]})}));var r=s(6720),c=s(5394);function x(e){let{routeIndex:t,route:s,updateRoute:a,removeRoute:d,disableUserInterface:x,...m}=e;const[u,p]=(0,l.useState)(!1),h=new l.useRef(null),b=()=>{var e;const t=null===h||void 0===h||null===(e=h.current)||void 0===e?void 0:e.classList;t.contains("hidden")?(p((e=>!0)),t.remove("hidden")):(p((e=>!1)),t.add("hidden"))};return(0,i.jsx)("div",{...m,children:(0,i.jsxs)("div",{className:"flex flex-col border border-gray-200 px-2 py-2 rounded-md ",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("div",{className:"flex flex-row items-start gap-1",children:[(0,i.jsx)("div",{children:(0,i.jsx)(c.eVO,{size:18,className:"text-gray-400"})}),(0,i.jsxs)("div",{className:"flex flex-col pr-[4px]",children:[(0,i.jsxs)("p",{className:"text-sm font-bold",children:[s.primary_text,","," ",(0,i.jsx)("span",{className:"font-normal",children:s.secondary_text})]}),s.route_detail&&(0,i.jsx)("p",{className:"text-gray-500 text-xs",children:s.route_detail}),(0,i.jsx)("div",{children:(0,i.jsx)("button",{disabled:x,onClick:b,className:(0,o.cn)("text-yellow-400 font-bold text-xs hover:opacity-75",{"text-red-700":u}),children:u?"":"Add detail"})})]})]}),(0,i.jsx)("div",{className:"flex flex-col justify-center items-center gap-2",children:(0,i.jsx)("button",{disabled:x,onClick:()=>d(t),className:"text-red-700",children:(0,i.jsx)(r.uDv,{size:20,className:"text-red-500 hover:opacity-75"})})})]}),(0,i.jsx)(n,{ref:h,route:s,updateRoute:a,routeIndex:t,toggleRouteDetailVisibility:b,disableUserInterface:x})]})})}function m(e){let{useArrayOutput:t,disableUserInterface:s}=e;const{array:l,update:a,remove:o}=t;return(0,i.jsx)("div",{children:l.map(((e,t)=>(0,i.jsx)(x,{className:"mb-1",routeIndex:t,route:e,updateRoute:a,removeRoute:o,disableUserInterface:s},t)))})}},1569:(e,t,s)=>{s.d(t,{K:()=>i});var l=s(5043),a=s(4694),o=s(5394),d=s(579);function i(e){let{disableUserInterface:t,useRoutesOutput:s,setDisableUserInterface:i,...n}=e;const r=(0,l.useRef)(),{data:c,status:x,handleRouteSelect:m,search:u}=s,p=(0,l.useRef)(null),h=e=>{e?p.current.classList.remove("hidden"):p.current.classList.add("hidden")};return(0,l.useEffect)((()=>{h("OK"===x)}),[x]),(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("input",{ref:r,...n,disabled:t,type:"text",placeholder:"Search location",onChange:e=>{u(e.currentTarget.value)},className:(0,a.cn)("text-sm text-slate-800 w-full shadow-sm block rounded-md border-gray-200 focus:z-10 focus:ring-yellow-400 focus:border-yellow-400 disabled:opacity-75 disabled:pointer-events-none",{})}),(0,d.jsx)("div",{ref:p,className:"hidden",children:(0,d.jsx)("ul",{className:"w-full rounded-md bg-white shadow-md border border-gray-200rounded-md absolute top-12 flex flex-col justify-center items-start",children:null===c||void 0===c?void 0:c.map(((e,t)=>(0,d.jsxs)("li",{className:"border-b border-gray-200 px-2 py-2 bg-gray-100 flex w-full gap-1 cursor-pointer",onClick:m(e,r,i),children:[(0,d.jsx)("div",{children:(0,d.jsx)(o.eVO,{size:15,className:"text-gray-400"})}),(0,d.jsxs)("p",{className:"text-xs text-black font-bold",children:[e.structured_formatting.main_text,","," ",(0,d.jsx)("span",{className:"font-normal",children:e.structured_formatting.secondary_text})]})]},t)))})})]})})}},4732:(e,t,s)=>{s.d(t,{q:()=>i});var l=s(1984);const a={hidden:{opacity:0},visible:{opacity:1},exit:{opacity:0}};var o=s(607),d=s(579);function i(e){let{children:t,...s}=e;return(0,d.jsx)(l.P.section,{variants:a,animate:"visible",initial:"hidden",exit:"exit",transition:{duration:o.KD,delay:o.XP},children:t})}},5624:(e,t,s)=>{s.d(t,{q:()=>o});var l=s(2780),a=s(579);function o(e){let{secondary_text:t}=e;return(0,a.jsxs)("div",{className:"m-auto max-w-4xl flex flex-col justify-center items-center py-48 my-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center gap-4",children:[(0,a.jsx)("span",{className:"text-3xl font-bold",children:"Please be patient"}),(0,a.jsx)("span",{className:"text-xl",children:t})]}),(0,a.jsx)(l.LW,{visible:!0,width:"40",height:"20",color:"#000"})]})}},6316:(e,t,s)=>{s.d(t,{h:()=>a});var l=s(5043);function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const[t,s]=(0,l.useState)(e);return{array:t,push:e=>{s((t=>[...t,e]))},filter:e=>{s((t=>t.filter(e)))},update:(e,t)=>{s((s=>[...s.slice(0,e),t,...s.slice(e+1,s.length)]))},remove:e=>{s((t=>[...t.slice(0,e),...t.slice(e+1,t.length)]))},clear:()=>{s([])},set:e=>{s((t=>e))}}}},524:(e,t,s)=>{s.d(t,{Q:()=>o});var l=s(2907),a=s(6007);function o(e){const{data:t,isLoading:s,isSuccess:o,mutateAsync:d,isError:i,error:n}=(0,l.useMutation)({mutationKey:"compute-distance",mutationFn:a.rn,onMutate:t=>{e((e=>!0))},onSuccess:t=>{e((e=>!1))},onError:t=>{e((e=>!1))}});return{data:t,isComputeDistanceLoading:s,isComputeDistanceSuccess:o,isComputeDistanceError:i,computeDistanceError:n,computeDistanceAsync:d}}},4451:(e,t,s)=>{s.d(t,{J:()=>a});var l=s(3687);function a(e){const{value:t,setValue:s,clearSuggestions:a,suggestions:{data:o,status:d}}=(0,l.Ay)({callbackName:"onInit",requestOptions:{componentRestrictions:{country:"za"}},debounce:100});return{data:o,status:d,handleRouteSelect:(t,o,d)=>{let{description:i,structured_formatting:n}=t;return async()=>{d((e=>!0));try{s(i,!1),a(),await(0,l.fx)({address:i}).then((t=>{const{main_text:s,secondary_text:a}=n,{lat:i,lng:r}=(0,l.rg)(t[0]);e({purpose:"Pick up or Drop off",route_detail:"",primary_text:s,secondary_text:a,lat:i,lng:r}),o&&(o.current.value=""),d((e=>!1))}))}catch(t){}}},search:s}}},3871:()=>{}}]);
//# sourceMappingURL=143.1c44d61c.chunk.js.map