"use strict";(self.webpackChunkmatols_website=self.webpackChunkmatols_website||[]).push([[786],{7786:(e,t,s)=>{s.r(t),s.d(t,{default:()=>g});var r=s(5475),a=s(6316),n=s(8386),o=s(1569),i=s(4703),l=s(5043),c=s(6600),d=s(3234),u=s(2820),m=s(7613),x=s(2780),f=s(4451),p=s(524),h=s(4732),b=s(579);function g(){const[e,t]=(0,l.useState)(!1),{isComputeDistanceLoading:s,isComputeDistanceError:g,computeDistanceError:v,computeDistanceAsync:y}=(0,p.Q)(t),j=(0,a.h)([]),w=(0,f.J)(j.push),{setCreateBookingObj:N,getCreateBookingObj:k}=(0,c.X)(d.r.create_booking);(0,l.useEffect)((()=>{window.scrollTo(0,0)}),[]),(0,l.useEffect)((()=>{const e=k();e.pickup_dropoff_routes&&j.set(null===e||void 0===e?void 0:e.pickup_dropoff_routes)}),[]);return(0,b.jsx)(h.q,{children:(0,b.jsxs)("main",{className:"max-w-xl mx-auto my-4 p-6 text-black bg-white",children:[(0,b.jsxs)("h2",{className:"text-start text-black pb-6 font-extrabold text-3xl",children:["Choose Pick up and drop off locations",(0,b.jsx)("p",{className:"text-sm font-normal text-slate-800 pt-2",children:"Thank you for choosing Reload logistics services as your go to service provider."})]}),(0,b.jsx)(n.b,{useArrayOutput:j,disableUserInterface:e}),(0,b.jsx)(o.K,{useRoutesOutput:w,disableUserInterface:e,setDisableUserInterface:t}),(0,b.jsxs)("div",{className:"py-4 ",children:[g&&(0,b.jsx)(m.$p,{className:"mb-4",secondaryText:"".concat(v.response.data.message," ").concat(v.message)}),(0,b.jsxs)("div",{className:"flex flex-row items-center justify-end gap-3",children:[(0,b.jsx)(r.N_,{to:i.C.createbooking,className:"px-3 py-2 rounded-md text-white bg-slate-800 font-bold border-none ring-0 hover:bg-slate-950",children:"Back"}),(0,b.jsx)(u.$,{disabled:j.array.length<1,className:"w-auto",onClick:async()=>{if(j.array.length<1)return;const e=k();if(e)try{await y({pickup_dropoff_routes:j.array}).then((t=>{N({...e,distance:Number(t.distance),pickup_dropoff_routes:j.array}),window.location.href=i.C.chooseadditionalinformation}))}catch(t){}},children:s?(0,b.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:(0,b.jsx)(x.LW,{visible:!0,width:"40",height:"20",color:"#000"})}):"Select and continue"})]})]}),(0,b.jsx)("div",{className:"mb-20"})]})})}},7613:(e,t,s)=>{s.d(t,{$p:()=>i,C9:()=>n,Z0:()=>o});s(5043);var r=s(4694),a=s(579);function n(e){let{secondaryText:t,className:s,children:n,...o}=e;return(0,a.jsx)("div",{...o,className:(0,r.cn)("bg-green-100 border-t-4 border-green-500 rounded-b-md text-green-900 px-4 py-2",s),role:"alert",children:(0,a.jsx)("div",{className:"flex text-wrap break-words",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold",children:"Yey ! all set"}),(0,a.jsx)("p",{className:"text-sm text-wrap break-words",children:t||"Welcome to Reload Logistics services"})]})})})}function o(e){let{primaryText:t,secondaryText:s,className:n,children:o,...i}=e;return(0,a.jsx)("div",{...i,className:(0,r.cn)("bg-blue-100 border-t-4 border-blue-500 rounded-b-md text-blue-700 px-4 py-2",n),role:"alert",children:(0,a.jsx)("div",{className:"flex text-wrap break-words",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold",children:t}),(0,a.jsx)("p",{className:"text-sm text-wrap break-words",children:s||"Welcome to Reload Logistics services"})]})})})}function i(e){let{secondaryText:t,className:s,children:n,...o}=e;return(0,a.jsx)("div",{...o,className:(0,r.cn)("bg-red-100 border-t-4 border-red-500 rounded-b-md text-red-900 px-4 py-2",s),role:"alert",children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold",children:"Oops ! Error"}),(0,a.jsx)("p",{className:"text-sm",children:t||"An error occured"})]})})})}},8386:(e,t,s)=>{s.d(t,{b:()=>m});var r=s(5043),a=s(4858),n=s(4694),o=s(184),i=s(579);const l=r.forwardRef(((e,t)=>{let{className:s,route:r,routeIndex:l,updateRoute:c,toggleRouteDetailVisibility:d,disableUserInterface:u,...m}=e;const{register:x,handleSubmit:f,reset:p}=(0,a.mN)();return(0,i.jsxs)("form",{...m,ref:t,className:(0,n.cn)("w-full hidden",s),onSubmit:f((e=>{c(l,{...r,...e}),d(),p()})),children:[(0,i.jsx)("div",{children:(0,i.jsx)("input",{...x("route_detail",{disabled:u}),type:"text",name:"route_detail",placeholder:"Please enter details",className:(0,n.cn)("text-sm text-slate-800 w-full relative shadow-sm block rounded-md border-0 border-b-gray-200 focus:z-10 ring-0 focus:ring-yellow-400 focus:border-yellow-400 disabled:opacity-75 disabled:pointer-events-none")})}),(0,i.jsx)("div",{className:"w-full flex flex-row justify-end items-center px-2 pt-2",children:(0,i.jsx)("button",{type:"submit",className:"text-green-700 hover:text-opacity-75 disabled:pointer-events-none disabled:opacity-75",children:(0,i.jsx)(o.CMH,{})})})]})}));var c=s(6720),d=s(5394);function u(e){let{routeIndex:t,route:s,updateRoute:a,removeRoute:o,disableUserInterface:u,...m}=e;const[x,f]=(0,r.useState)(!1),p=new r.useRef(null),h=()=>{var e;const t=null===p||void 0===p||null===(e=p.current)||void 0===e?void 0:e.classList;t.contains("hidden")?(f((e=>!0)),t.remove("hidden")):(f((e=>!1)),t.add("hidden"))};return(0,i.jsx)("div",{...m,children:(0,i.jsxs)("div",{className:"flex flex-col border border-gray-200 px-2 py-2 rounded-md ",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("div",{className:"flex flex-row items-start gap-1",children:[(0,i.jsx)("div",{children:(0,i.jsx)(d.eVO,{size:18,className:"text-gray-400"})}),(0,i.jsxs)("div",{className:"flex flex-col pr-[4px]",children:[(0,i.jsxs)("p",{className:"text-sm font-bold",children:[s.primary_text,","," ",(0,i.jsx)("span",{className:"font-normal",children:s.secondary_text})]}),s.route_detail&&(0,i.jsx)("p",{className:"text-gray-500 text-xs",children:s.route_detail}),(0,i.jsx)("div",{children:(0,i.jsx)("button",{disabled:u,onClick:h,className:(0,n.cn)("text-yellow-400 font-bold text-xs hover:opacity-75",{"text-red-700":x}),children:x?"":"Add detail"})})]})]}),(0,i.jsx)("div",{className:"flex flex-col justify-center items-center gap-2",children:(0,i.jsx)("button",{disabled:u,onClick:()=>o(t),className:"text-red-700",children:(0,i.jsx)(c.uDv,{size:20,className:"text-red-500 hover:opacity-75"})})})]}),(0,i.jsx)(l,{ref:p,route:s,updateRoute:a,routeIndex:t,toggleRouteDetailVisibility:h,disableUserInterface:u})]})})}function m(e){let{useArrayOutput:t,disableUserInterface:s}=e;const{array:r,update:a,remove:n}=t;return(0,i.jsx)("div",{children:r.map(((e,t)=>(0,i.jsx)(u,{className:"mb-1",routeIndex:t,route:e,updateRoute:a,removeRoute:n,disableUserInterface:s},t)))})}},1569:(e,t,s)=>{s.d(t,{K:()=>i});var r=s(5043),a=s(4694),n=s(5394),o=s(579);function i(e){let{disableUserInterface:t,useRoutesOutput:s,setDisableUserInterface:i,...l}=e;const c=(0,r.useRef)(),{data:d,status:u,handleRouteSelect:m,search:x}=s,f=(0,r.useRef)(null),p=e=>{e?f.current.classList.remove("hidden"):f.current.classList.add("hidden")};return(0,r.useEffect)((()=>{p("OK"===u)}),[u]),(0,o.jsx)("div",{className:"mt-4",children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("input",{ref:c,...l,disabled:t,type:"text",placeholder:"Search location",onChange:e=>{x(e.currentTarget.value)},className:(0,a.cn)("text-sm text-slate-800 w-full shadow-sm block rounded-md border-gray-200 focus:z-10 focus:ring-yellow-400 focus:border-yellow-400 disabled:opacity-75 disabled:pointer-events-none",{})}),(0,o.jsx)("div",{ref:f,className:"hidden",children:(0,o.jsx)("ul",{className:"w-full rounded-md bg-white shadow-md border border-gray-200rounded-md absolute top-12 flex flex-col justify-center items-start",children:null===d||void 0===d?void 0:d.map(((e,t)=>(0,o.jsxs)("li",{className:"border-b border-gray-200 px-2 py-2 bg-gray-100 flex w-full gap-1 cursor-pointer",onClick:m(e,c,i),children:[(0,o.jsx)("div",{children:(0,o.jsx)(n.eVO,{size:15,className:"text-gray-400"})}),(0,o.jsxs)("p",{className:"text-xs text-black font-bold",children:[e.structured_formatting.main_text,","," ",(0,o.jsx)("span",{className:"font-normal",children:e.structured_formatting.secondary_text})]})]},t)))})})]})})}},4732:(e,t,s)=>{s.d(t,{q:()=>i});var r=s(1984);const a={hidden:{opacity:0},visible:{opacity:1},exit:{opacity:0}};var n=s(607),o=s(579);function i(e){let{children:t,...s}=e;return(0,o.jsx)(r.P.section,{variants:a,animate:"visible",initial:"hidden",exit:"exit",transition:{duration:n.KD,delay:n.XP},children:t})}},6316:(e,t,s)=>{s.d(t,{h:()=>a});var r=s(5043);function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const[t,s]=(0,r.useState)(e);return{array:t,push:e=>{s((t=>[...t,e]))},filter:e=>{s((t=>t.filter(e)))},update:(e,t)=>{s((s=>[...s.slice(0,e),t,...s.slice(e+1,s.length)]))},remove:e=>{s((t=>[...t.slice(0,e),...t.slice(e+1,t.length)]))},clear:()=>{s([])},set:e=>{s((t=>e))}}}},524:(e,t,s)=>{s.d(t,{Q:()=>n});var r=s(2907),a=s(6007);function n(e){const{data:t,isLoading:s,isSuccess:n,mutateAsync:o,isError:i,error:l}=(0,r.useMutation)({mutationKey:"compute-distance",mutationFn:a.rn,onMutate:t=>{e((e=>!0))},onSuccess:t=>{e((e=>!1))},onError:t=>{e((e=>!1))}});return{data:t,isComputeDistanceLoading:s,isComputeDistanceSuccess:n,isComputeDistanceError:i,computeDistanceError:l,computeDistanceAsync:o}}},6600:(e,t,s)=>{s.d(t,{X:()=>a});var r=s(4e3);function a(e){const{setItem:t,getItem:s,removeItem:a}=(0,r.M)(e);return{setCreateBookingObj:s=>{try{const r=window.localStorage.getItem(e);if(r){const e={...JSON.parse(r),...s};return void t(e)}t(s)}catch(r){}},getCreateBookingObj:s,removeCreatedBookingObj:a}}},4451:(e,t,s)=>{s.d(t,{J:()=>a});var r=s(3687);function a(e){const{value:t,setValue:s,clearSuggestions:a,suggestions:{data:n,status:o}}=(0,r.Ay)({callbackName:"onInit",requestOptions:{componentRestrictions:{country:"za"}},debounce:100});return{data:n,status:o,handleRouteSelect:(t,n,o)=>{let{description:i,structured_formatting:l}=t;return async()=>{o((e=>!0));try{s(i,!1),a(),await(0,r.fx)({address:i}).then((t=>{const{main_text:s,secondary_text:a}=l,{lat:i,lng:c}=(0,r.rg)(t[0]);e({purpose:"Pick up or Drop off",route_detail:"",primary_text:s,secondary_text:a,lat:i,lng:c}),n&&(n.current.value=""),o((e=>!1))}))}catch(t){}}},search:s}}},3687:(e,t,s)=>{s.d(t,{Ay:()=>o,fx:()=>i,rg:()=>l});var r=s(5043);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},a.apply(this,arguments)}var n=function(e){var t=(0,r.useRef)(e);return t.current=e,t},o=function(e){var t=void 0===e?{}:e,s=t.requestOptions,o=t.debounce,i=void 0===o?200:o,l=t.cache,c=void 0===l?86400:l,d=t.cacheKey,u=void 0===d?"upa":d,m=t.googleMaps,x=t.callbackName,f=t.defaultValue,p=void 0===f?"":f,h=t.initOnMount,b=void 0===h||h,g=(0,r.useState)(!1),v=g[0],y=g[1],j=(0,r.useState)(p),w=j[0],N=j[1],k=(0,r.useState)({loading:!1,status:"",data:[]}),C=k[0],_=k[1],O=(0,r.useRef)(),S=n(s),R=n(m),I=(0,r.useCallback)((function(){var e;if(!O.current){var t=window.google,s=R.current,r=(null==s?void 0:s.places)||(null==t||null==(e=t.maps)?void 0:e.places);r?(O.current=new r.AutocompleteService,y(!0)):console.error("\ud83d\udca1 use-places-autocomplete: Google Maps Places API library must be loaded. See: https://github.com/wellyshen/use-places-autocomplete#load-the-library")}}),[R]),D=(0,r.useCallback)((function(){_({loading:!1,status:"",data:[]})}),[]),A=(0,r.useCallback)((function(e){void 0===e&&(e=u);try{sessionStorage.removeItem(e)}catch(t){}}),[u]),P=(0,r.useCallback)(function(e,t){var s;return function(){for(var r=this,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];null!==s&&(clearTimeout(s),s=null),s=setTimeout((function(){return e.apply(r,n)}),t)}}((function(e){var t;if(e){_((function(e){return a({},e,{loading:!0})}));var s={};try{s=JSON.parse(sessionStorage.getItem(u)||"{}")}catch(r){}c&&(s=Object.keys(s).reduce((function(e,t){return s[t].maxAge-Date.now()>=0&&(e[t]=s[t]),e}),{}))[e]?_({loading:!1,status:"OK",data:s[e].data}):null==(t=O.current)||t.getPlacePredictions(a({},S.current,{input:e}),(function(t,a){if(_({loading:!1,status:a,data:t||[]}),c&&"OK"===a){s[e]={data:t,maxAge:Date.now()+1e3*c};try{sessionStorage.setItem(u,JSON.stringify(s))}catch(r){}}}))}else D()}),i),[c,u,D,S]),E=(0,r.useCallback)((function(e,t){void 0===t&&(t=!0),N(e),O.current&&t&&P(e)}),[P]);return(0,r.useEffect)((function(){if(!b)return function(){return null};var e=window.google;return R.current||null!=e&&e.maps||!x?I():window[x]=I,function(){window[x]&&delete window[x]}}),[x,R,I,b]),{ready:v,value:w,suggestions:C,setValue:E,clearSuggestions:D,clearCache:A,init:I}},i=function(e){var t=new window.google.maps.Geocoder;return new Promise((function(s,r){t.geocode(e,(function(t,a){"OK"!==a&&r(a),!e.address&&e.componentRestrictions&&(console.error("\ud83d\udca1 use-places-autocomplete: Please provide an address when using getGeocode() with the componentRestrictions."),s(t)),s(t)}))}))},l=function(e){var t=e.geometry.location,s=t.lat,r=t.lng;return{lat:s(),lng:r()}}}}]);
//# sourceMappingURL=786.e288c654.chunk.js.map